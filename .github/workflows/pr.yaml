name: pre-merge
on:
  # push:
  #   branches:
  #     - main
  pull_request:

permissions: write-all

jobs:
  vale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: â¬‡ï¸ Install snap
        run: sudo apt update && sudo apt install snapd

      - name: â¬‡ï¸ Install vale
        run: |
          for i in {1..3}; do
            sudo snap install vale --edge && break || sleep 5
          done

      - name: ğŸ§ª Lint distributed contents
        run: bash ci/vale.bash
